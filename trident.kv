#:kivy 1.9.0

<Poseidon>:
	survey: survey
	jobNameLabel: jobNameLabel
	pointNameLabel: pointNameLabel
	jobNameButton:jobNameButton
	newPointButton: newPointButton
	dataCarousel: dataCarousel
	
	BoxLayout:
		size: root.width,root.height
		orientation: 'vertical'
		top:99
		BoxLayout:
			id: navigation
			size_hint_y: .1
            
#			Button:
#				size_hint_x:None
#				text: 'Prev'
#				on_release: DataCarousel.load_previous()

#			Button:
#				size_hint_x:None
#				text: 'Next'
#				on_release: DataCarousel.load_next()
			Button:
				id: settingsButton
				text: 'Settings'
				size_hint_x: None
				on_press:
					root.Settings_Button_pressed()
					
			Button:
				id: jobNameButton
				text: 'Survey Name'
			
			Label:
				id: jobNameLabel
			Label:
				text:"-"
			Label:
				id: pointNameLabel
				
			Button:
				id: survey
				size_hint_x: None
				text: 'Start Survey'
				
			Button: 
				id:newPointButton
				text: 'Add Point'
		Carousel:
			id: dataCarousel
			loop: True
            
            BoxLayout:
                id: commandInterface
                orientation: 'vertical'
                size_hint_x: .3
                size_hint_y: .68
                pos_hint: {'x': .49, 'y': .20} 
                spacing: 10
                
               
                Label:
                    text: 'Command Line Output'
                    size_hint_y: None
                    height: self.texture_size[1]
                    pos_hint: {'x': .66, 'y': .09}
                    text_size: self.width, None
                    
                TextInput:
                    pos_hint: {'x': .66, 'y': .45}
                    size: (30,50)
                    text: ''
                    readonly: True
                
                Label:
                    text: 'Receiver Status'
                    size_hint_y: None
                    height: self.texture_size[1]
                    pos_hint: {'x': .66, 'y': .09}
                    text_size: self.width, None
                
                BoxLayout:
                    id: commandInterface
                    size_hint_x: .8
                    size_hint_y: .26
                    spacing: 5
                    pos_hint: {'x': .66, 'y': .25}
                    
                    TextInput:
                        pos_hint: {'x': .05, 'y': .09}
                        size: (10,10)
                        text: 'Left'
                        readonly: True
                        background_color: [255,0,0,20]
                    
                    TextInput:
                        pos_hint: {'x': .05, 'y': .09}
                        size: (10,10)
                        text: 'Center'
                        readonly: True
                        background_color: [255,0,0,20]
                        
                    TextInput:
                        pos_hint: {'x': .05, 'y': .09}
                        size: (10,10)
                        text: 'Right'
                        readonly: True
                        background_color: [255,0,0,20]
                
                Label:
                    text: 'Other Functions'
                    size_hint_y: None
                    height: self.texture_size[1]
                    pos_hint: {'x': .66, 'y': .09}
                    text_size: self.width, None
                    
                Button:
                    text: 'Save'
                    size_hint_y: None
                    height: 40
                    pos_hint: {'x': .65, 'y': .09}
                    text_size: self.width, None
                    halign: 'center'
                Button:
                    text: 'Open Existing File'
                    size_hint_y: None
                    height: 40
                    pos_hint: {'x': .65, 'y': .09}
                    text_size: self.width, None
                    halign: 'center'

<SettingsMenu>:
	cols: 3
	padding: 10
	spacing: 10

	vertical_tolerance: vertical_tolerance
	horizontal_tolerance: horizontal_tolerance
	gps_spacing: gps_spacing
	antennaHeight: antennaHeight
	phaseCenter: phaseCenter
	leftReceiver: leftReceiver
	centerReceiver: centerReceiver
	rightReceiver: rightReceiver
	verticalLabel: verticalLabel
	horizontalLabel: horizontalLabel
	gpsSpacingLabel: gpsSpacingLabel
	antennaLabel: antennaLabel
	phaseLabel: phaseLabel

	Label:
		text: 'Left Receiver'
	Button:
		id: leftReceiver
		on_press:
			root.updateLR = True
			root.receiverPopup(self,"Left Receiver")
			
	RButton:
		id: clearLR
		on_press:
			leftReceiver.text = ''
			root.clearReceiver('leftReceiver')

	Label:
		text: 'Center Receiver'
	Button:
		id: centerReceiver
		on_press:
			root.updateCR = True
			root.receiverPopup(self,"Center Receiver")

	RButton:
		id: clearCR
		on_press:
			centerReceiver.text = ''
			root.clearReceiver('centerReceiver')

	Label:
		text: 'Right Receiver'
	Button:
		id: rightReceiver
		on_press:
			root.updateRR = True
			root.receiverPopup(self,"Right Receiver")

	RButton:
		id: clearRR
		on_press:
			rightReceiver.text = ''
			root.clearReceiver('rightReceiver')

	Label:
		text: 'Vertical Tolerance (m):'
	FInput
		id: vertical_tolerance
	errorLabel:
		id: verticalLabel

	Label:
		text: 'Horizontal Tolerance (m):'
	FInput:
		id: horizontal_tolerance
	errorLabel:
		id: horizontalLabel

	Label:
		text: 'GPS Spacing (m):'
	FInput:
		id: gps_spacing
	errorLabel:
		id: gpsSpacingLabel

	Label:
		text: 'Antenna Height (m):'
	FInput:
		id: antennaHeight
	errorLabel:
		id: antennaLabel

	Label:
		text: 'Phase Center (m):'
	FInput:
		id: phaseCenter
	errorLabel:
		id: phaseLabel

	Button:
		text: 'Submit'
		on_release:
			root.submit(horizontal_tolerance.text,vertical_tolerance.text,gps_spacing.text,antennaHeight.text,phaseCenter.text)

	Button:
		text: 'Reset Tolerances'
		on_release:
			vertical_tolerance.text = str(0.1)
			horizontal_tolerance.text = str(0.05)
			gps_spacing.text = str(0.5)
			antennaHeight.text = str(2.02)
			phaseCenter.text = str(0.05)

<RButton@Button>
	text: "X"
	size_hint_x: None
	width: 25

<FInput@TextInput>
	input_filter:'float'
	multiline: False

<errorLabel@Label>
	color: 1,0,0,1
	size_hint_x: None
	width: 25

<SurveyPage>:
	measureButton: measureButton
	counterLabel: counterLabel
	epochInput: epochInput
	
	BoxLayout:
		size: root.width,root.height
		orientation: 'horizontal'
		Label
		GridLayout:
			cols: 2
			padding: 10
			spacing: 10
			size_hint_x: .5
			size_hint_y: .4
		
		##	Label:
		##		text: 'Point Name'
		##	TextInput:
		##		multiline: False
		##	Label:
		##		text: 'Point Code'
		##	TextInput:
		##		multiline: False
			Label:
				text: 'Counter'
			Label:
				id:counterLabel
			Label:
				text: 'Epochs to Measure:'
			TextInput:
				id: epochInput
				multiline: False
				input_filter: 'int'
			Button:
				id: measureButton
				text: 'Measure Point'